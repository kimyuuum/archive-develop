# Transaction

## Transaction

작업의 완전성을 보장한다. 논리적인 작업 set을 모두 완벽하게 처리하거나, 처리하지 못한 경우에는 원 상태로 복구해서 작업의 일부만 적용되는 것을 막아준다.

### Transaction / Lock

**Lock** : 동시성을 제어하기 위한 기능. 여러 connection에서 동시에 동일한 자원(record, table)을 요청할 경우, 순서대로 한 시점에는 하나의 커넥션만 변경할 수 있게 한다.

**Transaction** : 데이터의 정합성을 보장하기 위한 기능. 논리적 작업 set 자체가 100% 적용되거나, 적용되지 않아야 한다.

### 특성

1. Atomicity 

    트랜잭션 중간에 문제가 발생한다면, 어떠한 작업도 수행되어서는 안된다.

2. Consistency

    트랜잭션이 완료 된 다음의 상태에서도 트랜잭션이 일어나기 전과 동일하게 일관성을 보장해야한다.

3. Isolation

    각각의 transaction은 서로 간섭 없이 독립적이어야 한다.

4. Durability

    트랜잭션이 정상 종료된 다음에는 영구적으로 데이터가 DB에 저장되어야 한다.

### 실행 과정

![image](https://user-images.githubusercontent.com/46887352/98667848-5731a200-2392-11eb-8518-c5e51b88603e.png)

트랜잭션은 꼭 필요한 최소의 코드에만 적용해서, 범위를 최소화하자.