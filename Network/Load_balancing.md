# Load Balancing



분산식 웹 서비스에서 사용된다. 로드 밸런서를 이용하여 여러 서버에 부하를 나누어주는 방식이다. 순간적으로 트래픽이 많이 발생하면 한 서버가 부담하는 트래픽을 나누어서 처리한다.



## DNS Round Robin

별도의 SW / HW 로드 밸런싱 장비를 사용하지 않고 DNS만을 이용하여 도메인 record 정보를 조회하는 시점에서 트래픽을 분산하는 기법이다.

사용자가 도메인 주소를 브라우저에 입력하면, DNS는 도메인의 정보를 조회하는데, 이 때 IP 주소를 여러대의 서버 IP 리스트 중에서 RR 형태로 랜덤하게 하나 or 여러개를 다시 사용자에게 알려준다.

→ 결과적으로 웹사이트에 접속하는 다수의 사용자는 **실제로 복수의 웹서버에 나뉘어서 접속**하면서 부하가 분산된다.



### 문제점

1. 서버의 수 만큼 공인 IP 주소가 필요하다.

2. Health Check가 없다. == 가장 큰 단점

   웹 서버에 문제가 생겨 서비스를 할 수 없는 경우에도 DNS는 이를 알 방법이 없다. 그러므로 무중단 서비스보다는 여러대의 웹 서버로 트래픽을 부하 분산할 때 가장 편리하게 사용할 수 있는 옵션이다.

### 개선 방안

1. **Weighted Round Robin (WRR)**

   각 웹 서버에 가중치를 가미해서 분산 비용을 변경한다. 물리 가중치가 큰 서버일수록 빈번하게 선택된다. → 성능 좋은 서버의 가중치를 높게 잡으면 된다.

2. **Last Connection**

   접속 클라이언트 수가 가장 작은 서버를 선택한다. load balancer에서 실시간으로 connection 수를 관리하거나, 각 서버에서 주기적으로 알리는 방법이 필요하다.